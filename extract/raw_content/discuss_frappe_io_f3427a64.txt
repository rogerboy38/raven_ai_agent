# Source URL: https://discuss.frappe.io/t/socket-io-over-https-on-frappe-erpnext-16-unauthorized-via-nginx-proxy/160334
# Content Length: 7509 characters
# Extracted at: 2026-02-09 23:22:46
#============================================================

Socket.IO over HTTPS on Frappe/ERPNext 16: Unauthorized via Nginx proxy - Install / Update / Deployment - Frappe Forum
[Frappe.io](https://frappe.io)[Frappe Cloud](https://frappe.io/cloud)[Documentation](https://docs.frappe.io/)[Partners](https://frappe.io/partners)[Frappe School](https://frappe.school)[Marketplace](https://cloud.frappe.io/marketplace)[Community Chat (new!)](https://community.frappe.io/)
[Skip to main content](#main-container)
[![](https://discuss.frappe.io/uploads/default/original/3X/e/1/e1295d1f76ba489dd58f8c9b55eee88286fc9a31.png)](/)
Sign UpLog In
\* ​
\* [Topics](/latest)
\* More
Categories
\* [Frappe Books](/c/business-apps/frappe-books/76)
\* [Frappe Helpdesk](/c/business-apps/frappehelpdesk/69)
\* [Insights](/c/business-apps/insights/74)
\* [ERPNext](/c/erpnext/6)
\* [Frappe Builder](/c/frappe-builder/83)
\* [Frappe Cloud](/c/frappe-cloud/77)
\* [Frappe Framework](/c/framework/5)
\* [Frappe HR](/c/hr/22)
\* [Healthcare](/c/healthcare/58)
\* [Gameplan](/c/productivity-suite/gameplan/75)
\* [All categories](/categories)
Tags
\* [erpnext](/tag/erpnext)
\* [customization](/tag/customization)
\* [frappe](/tag/frappe)
\* [bug](/tag/bug)
\* [installation\\_problem](/tag/installation\_problem)
\* [All tags](/tags)
​
# [Socket.IO over HTTPS on Frappe/ERPNext 16: Unauthorized via Nginx proxy](/t/socket-io-over-https-on-frappe-erpnext-16-unauthorized-via-nginx-proxy/160334)
[Install / Update](/c/bench/13)[Deployment](/c/bench/deployment/21)
[erpnext](/tag/erpnext),[frappe](/tag/frappe),[bug](/tag/bug),[installation\\_problem](/tag/installation\_problem)
You have selected \*\*0\*\* posts.
select all
cancel selecting
74views5links
[![](/user\_avatar/discuss.frappe.io/ibragim\_ganizade/48/57207\_2.png)7](/u/Ibragim\_Ganizade)
[![](/user\_avatar/discuss.frappe.io/kurtruk/48/92023\_2.png)4](/u/kurtruk)
[![](/user\_avatar/discuss.frappe.io/asieftejani/48/86086\_2.png)2](/u/asieftejani)
[![](/letter\_avatar\_proxy/v4/letter/a/bc79bd/48.png)](/u/anantg)
[Feb 5](/t/socket-io-over-https-on-frappe-erpnext-16-unauthorized-via-nginx-proxy/160334/1)
1 / 14
Feb 5
[21h ago](/t/socket-io-over-https-on-frappe-erpnext-16-unauthorized-via-nginx-proxy/160334/14)
[![](/user\_avatar/discuss.frappe.io/ibragim\_ganizade/48/57207\_2.png)](/u/ibragim\_ganizade)
[Ibragim\\_Ganizade](/u/ibragim\_ganizade)
[4d](/t/socket-io-over-https-on-frappe-erpnext-16-unauthorized-via-nginx-proxy/160334)
Hi all,
I’m running into an issue with ERPNext v16 behind Nginx with HTTPS and [Socket.IO](http://Socket.IO).
\*\*Setup:\*\*
\* Site: `frontend`
\* HTTPS domain: `https://frontend.example.com`
\* ERPNext HTTP: `http://example.com:8080`
\* Direct HTTP access to ERPNext works fine
\* Via Nginx + HTTPS, the browser always shows:
```
Error connecting to socket.io: Unauthorized: TypeError: fetch failed
```
\*\*Nginx [socket.io](http://socket.io) location:\*\*
```
location /socket.io/ {
proxy\_pass http://example.com:8080;
proxy\_http\_version 1.1;
proxy\_set\_header Upgrade $http\_upgrade;
proxy\_set\_header Connection "upgrade";
proxy\_set\_header Host $host;
proxy\_set\_header X-Forwarded-Proto https;
proxy\_set\_header X-Forwarded-For $proxy\_add\_x\_forwarded\_for;
proxy\_set\_header X-Real-IP $remote\_addr;
proxy\_read\_timeout 3600;
}
```
\*\*Problem summary:\*\*
\* [Socket.IO](http://Socket.IO) works correctly on the direct HTTP URL (`http://example.com:8080`) ![](https://discuss.frappe.io/images/emoji/twitter/white\_check\_mark.png?v=14)
\* Through HTTPS + Nginx proxy (`https://frontend.example.com`) it fails with `Unauthorized`![](https://discuss.frappe.io/images/emoji/twitter/cross\_mark.png?v=14)
\*\*Additional info:\*\*
\* I’ve noticed that on Frappe Cloud this problem doesn’t happen
\* I understand that Frappe Cloud uses Traefik for proxying WebSockets
\*\*Questions:\*\*
\* Has anyone successfully run ERPNext v16 with [Socket.IO](http://Socket.IO) via Nginx + HTTPS?
\* What additional settings are required for proper WebSocket authentication over HTTPS?
Any advice or working configuration examples would be greatly appreciated.
Solved by [Ibragim\\_Ganizade](/u/ibragim\_ganizade) in [post 14](/t/socket-io-over-https-on-frappe-erpnext-16-unauthorized-via-nginx-proxy/160334/14)
> After numerous attempts, it became clear what the issue was: port 80 was closed, which caused [Socket.IO](http://Socket.IO) errors and broke WebSocket connections in ERPNext.
> It turns out that Frappe Cloud also keeps port 80 open. I had it closed for security reasons, but without it, the frontend and WebSockets don’t …
1
​
​
74views5links
[![](/user\_avatar/discuss.frappe.io/ibragim\_ganizade/48/57207\_2.png)7](/u/Ibragim\_Ganizade)
[![](/user\_avatar/discuss.frappe.io/kurtruk/48/92023\_2.png)4](/u/kurtruk)
[![](/user\_avatar/discuss.frappe.io/asieftejani/48/86086\_2.png)2](/u/asieftejani)
[![](/letter\_avatar\_proxy/v4/letter/a/bc79bd/48.png)](/u/anantg)
[![](/user\_avatar/discuss.frappe.io/kurtruk/48/92023\_2.png)](/u/kurtruk)
[kurtruk](/u/kurtruk)
[4d](/t/socket-io-over-https-on-frappe-erpnext-16-unauthorized-via-nginx-proxy/160334/2)
Hi!
Part of my nginx config:
```
proxy\_set\_header Host $host;
proxy\_set\_header X-Forwarded-Host $host;
proxy\_set\_header X-Forwarded-Proto $scheme;
proxy\_set\_header X-Forwarded-For $proxy\_add\_x\_forwarded\_for;
proxy\_set\_header X-Frappe-Site-Name $host;
location /socket.io {
proxy\_http\_version 1.1;
proxy\_set\_header Upgrade $http\_upgrade;
proxy\_set\_header Connection "upgrade";
proxy\_set\_header X-Frappe-Site-Name $host;
proxy\_set\_header Origin $scheme://$http\_host;
proxy\_set\_header Host $host;
proxy\_pass http://erp\_host:80;
}
```
Sockets work fine.
1 Reply
​
​
Reply
### New & Unread Topics
Topic list, column headers with buttons are sortable.
| Topic | Replies | Views | Activity |
| --- | --- | --- | --- |
| [when running bench build –app helpdesk, then get error: killed (exit code 137)](/t/when-running-bench-build-app-helpdesk-then-get-error-killed-exit-code-137/154227) [Deployment](/c/bench/deployment/21) [frappe](/tag/frappe),[bug](/tag/bug),[developer](/tag/developer),[error](/tag/error) | [0](/t/when-running-bench-build-app-helpdesk-then-get-error-killed-exit-code-137/154227/1) | 33 | [Sep 2025](/t/when-running-bench-build-app-helpdesk-then-get-error-killed-exit-code-137/154227/1) |
| [Upcoming Architectural Changes to the Frappe/ERPNext Helm Chart](/t/upcoming-architectural-changes-to-the-frappe-erpnext-helm-chart/155681) [Deployment](/c/bench/deployment/21) | [1](/t/upcoming-architectural-changes-to-the-frappe-erpnext-helm-chart/155681/1) | 136 | [Oct 2025](/t/upcoming-architectural-changes-to-the-frappe-erpnext-helm-chart/155681/2) |
| [Helpdesk app icon broken](/t/helpdesk-app-icon-broken/144560) [Deployment](/c/bench/deployment/21) | [2](/t/helpdesk-app-icon-broken/144560/1) | 244 | [May 2025](/t/helpdesk-app-icon-broken/144560/3) |
| [CICD & Docker & k8s](/t/cicd-docker-k8s/151460) [Deployment](/c/bench/deployment/21) | [2](/t/cicd-docker-k8s/151460/1) | 120 | [Aug 2025](/t/cicd-docker-k8s/151460/3) |
| [Installation on OpenShift](/t/installation-on-openshift/159314) [Deployment](/c/bench/deployment/21) [frappe](/tag/frappe) | [0](/t/installation-on-openshift/159314/1) | 31 | [24d](/t/installation-on-openshift/159314/1) |
### Want to read more? Browse other topics in [Deployment](/c/bench/deployment/21) or [view latest topics](/latest).
[Powered by Discourse](https://discourse.org/powered-by)
[Frappe](https://frappe.io)
Invalid dateInvalid date