# Source URL: https://raw.githubusercontent.com/The-Commit-Company/raven/develop/raven/hooks.py
# Content Length: 8345 characters
# Extracted at: 2026-02-10 10:10:19
#============================================================

from . import \_\_version\_\_ as app\_version
app\_name = "raven"
app\_title = "Raven"
app\_publisher = "The Commit Company (Algocode Technologies Pvt. Ltd.)"
app\_description = "Messaging Application"
app\_email = "support@thecommit.company"
app\_license = "AGPLv3"
source\_link = "https://github.com/The-Commit-Company/Raven"
app\_logo = "/assets/raven/raven-logo.png"
app\_logo\_url = "/assets/raven/raven-logo.png"
# Includes in 
# ------------------
# include js, css files in header of desk.html
app\_include\_css = "raven.bundle.css"
# app\_include\_css = "/assets/raven/css/raven.css"
# app\_include\_js = "/assets/raven/js/raven.js" ]
app\_include\_js = "raven.bundle.js"
add\_to\_apps\_screen = [
{
"name": "raven",
"logo": "/assets/raven/raven-logo.png",
"title": "Raven",
"route": "/raven",
"has\_permission": "raven.permissions.check\_app\_permission",
}
]
sounds = [
{
"name": "raven\_notification",
"src": "/assets/raven/sounds/raven\_notification.mp3",
"volume": 0.2,
},
]
extend\_bootinfo = "raven.boot.boot\_session"
# include js, css files in header of web template
# web\_include\_css = "/assets/raven/css/raven.css"
# web\_include\_js = "/assets/raven/js/raven.js"
# include custom scss in every website theme (without file extension ".scss")
# website\_theme\_scss = "raven/public/scss/website"
# include js, css files in header of web form
# webform\_include\_js = {"doctype": "public/js/doctype.js"}
# webform\_include\_css = {"doctype": "public/css/doctype.css"}
# include js in page
# page\_js = {"page" : "public/js/file.js"}
# include js in doctype views
# doctype\_js = {"doctype" : "public/js/doctype.js"}
# doctype\_list\_js = {"doctype" : "public/js/doctype\_list.js"}
# doctype\_tree\_js = {"doctype" : "public/js/doctype\_tree.js"}
# doctype\_calendar\_js = {"doctype" : "public/js/doctype\_calendar.js"}
# Home Pages
# ----------
# application home page (will override Website Settings)
# home\_page = "login"
# website user home page (by Role)
# role\_home\_page = {
# "Role": "home\_page"
# }
# Generators
# ----------
# automatically create page for each record of this doctype
# website\_generators = ["Web Page"]
# Jinja
# ----------
# add methods and filters to jinja environment
# jinja = {
# "methods": "raven.utils.jinja\_methods",
# "filters": "raven.utils.jinja\_filters"
# }
# Installation
# ------------
# before\_install = "raven.install.before\_install"
after\_install = "raven.install.after\_install"
# after\_sync = ""
# Uninstallation
# ------------
# before\_uninstall = "raven.uninstall.before\_uninstall"
after\_uninstall = "raven.uninstall.after\_uninstall"
# Desk Notifications
# ------------------
# See frappe.core.notifications.get\_notification\_config
# notification\_config = "raven.notifications.get\_notification\_config"
# Permissions
# -----------
# Permissions evaluated in scripted ways
# permission\_query\_conditions = {
# "Event": "frappe.desk.doctype.event.event.get\_permission\_query\_conditions",
# }
#
# has\_permission = {
# "Event": "frappe.desk.doctype.event.event.has\_permission",
# }
# DocType Class
# ---------------
# Override standard doctype classes
# override\_doctype\_class = {
# "ToDo": "custom\_app.overrides.CustomToDo"
# }
# Document Events
# ---------------
# Hook on document methods and events
doc\_events = {
"\*": {
"after\_insert": "raven.raven\_integrations.doctype.raven\_document\_notification.raven\_document\_notification.run\_document\_notification",
"on\_update": "raven.raven\_integrations.doctype.raven\_document\_notification.raven\_document\_notification.run\_document\_notification",
"on\_trash": "raven.raven\_integrations.doctype.raven\_document\_notification.raven\_document\_notification.run\_document\_notification",
"on\_cancel": "raven.raven\_integrations.doctype.raven\_document\_notification.raven\_document\_notification.run\_document\_notification",
"on\_submit": "raven.raven\_integrations.doctype.raven\_document\_notification.raven\_document\_notification.run\_document\_notification",
},
"User": {
"after\_insert": "raven.raven.doctype.raven\_user.raven\_user.add\_user\_to\_raven",
"on\_update": "raven.raven.doctype.raven\_user.raven\_user.add\_user\_to\_raven",
"on\_trash": "raven.raven.doctype.raven\_user.raven\_user.remove\_user\_from\_raven",
},
"Department": {
"after\_insert": "raven.raven\_integrations.controllers.department.after\_insert",
"on\_update": "raven.raven\_integrations.controllers.department.on\_update",
"on\_trash": "raven.raven\_integrations.controllers.department.on\_trash",
},
"Employee": {
"after\_insert": "raven.raven\_integrations.controllers.employee.after\_insert",
"on\_update": "raven.raven\_integrations.controllers.employee.on\_update",
"on\_trash": "raven.raven\_integrations.controllers.employee.on\_trash",
},
}
# Scheduled Tasks
# ---------------
scheduler\_events = {
# "all": [
# "raven.scheduler.all"
# ],
# "daily": [
# "raven.scheduler.daily"
# ],
# "hourly": [
# "raven.scheduler.hourly"
# ],
# "weekly": [
# "raven.scheduler.weekly"
# ],
# "monthly": [
# "raven.scheduler.monthly"
# ],
"daily\_maintenance": ["raven.scheduler.daily.sync\_invalid\_tokens"],
"cron": {
# run every 5 minutes
"\*/5 \* \* \* \*": ["raven.scheduler.close\_expired\_polls.close\_expired\_polls"]
},
}
# Testing
# -------
# before\_tests = "raven.install.before\_tests"
# Overriding Methods
# ------------------------------
#
# override\_whitelisted\_methods = {
# "frappe.desk.doctype.event.event.get\_events": "raven.event.get\_events"
# }
#
# each overriding function accepts a `data` argument;
# generated from the base implementation of the doctype dashboard,
# along with any modifications made in other Frappe apps
# override\_doctype\_dashboards = {
# "Task": "raven.task.get\_dashboard\_data"
# }
# exempt linked doctypes from being automatically cancelled
#
# auto\_cancel\_exempted\_doctypes = ["Auto Repeat"]
# Ignore links to specified DocTypes when deleting documents
# -----------------------------------------------------------
ignore\_links\_on\_delete = ["Raven Message"]
# User Data Protection
# --------------------
# user\_data\_fields = [
# {
# "doctype": "{doctype\_1}",
# "filter\_by": "{filter\_by}",
# "redact\_fields": ["{field\_1}", "{field\_2}"],
# "partial": 1,
# },
# {
# "doctype": "{doctype\_2}",
# "filter\_by": "{filter\_by}",
# "partial": 1,
# },
# {
# "doctype": "{doctype\_3}",
# "strict": False,
# },
# {
# "doctype": "{doctype\_4}"
# }
# ]
# Authentication and authorization
# --------------------------------
# auth\_hooks = [
# "raven.auth.validate"
# ]
additional\_timeline\_content = {"\*": ["raven.api.raven\_message.get\_timeline\_message\_content"]}
website\_route\_rules = [
{"from\_route": "/raven/", "to\_route": "raven"},
{"from\_route": "/raven\_mobile/", "to\_route": "raven"},
]
permission\_query\_conditions = {
"Raven Channel": "raven.permissions.raven\_channel\_query",
"Raven Message": "raven.permissions.raven\_message\_query",
"Raven Poll": "raven.permissions.raven\_poll\_query",
"Raven Poll Vote": "raven.permissions.raven\_poll\_vote\_query",
"Raven Workspace": "raven.permissions.raven\_workspace\_query",
"Raven Workspace Member": "raven.permissions.raven\_workspace\_member\_query",
"Raven Channel Member": "raven.permissions.raven\_channel\_member\_query",
}
has\_permission = {
"Raven Channel": "raven.permissions.channel\_has\_permission",
"Raven Channel Member": "raven.permissions.channel\_member\_has\_permission",
"Raven Message": "raven.permissions.message\_has\_permission",
"Raven Poll Vote": "raven.permissions.raven\_poll\_vote\_has\_permission",
"Raven Poll": "raven.permissions.raven\_poll\_has\_permission",
"Raven User": "raven.permissions.raven\_user\_has\_permission",
"Raven Workspace Member": "raven.permissions.workspace\_member\_has\_permission",
"Raven Workspace": "raven.permissions.workspace\_has\_permission",
}
on\_session\_creation = "raven.api.user\_availability.set\_user\_active"
on\_logout = "raven.api.user\_availability.set\_user\_inactive"
export\_python\_type\_annotations = True
require\_type\_annotated\_api\_methods = True
raven\_document\_link\_override = "raven.api.document\_link.get\_new\_app\_document\_links"
# Translation
# ------------
# List of apps whose translatable strings should be excluded from this app's translations.
ignore\_translatable\_strings\_from = ["frappe"]
